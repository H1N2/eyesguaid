# 总体功能说明

## 1.背景

> 为了办公室使用电脑的工作者减缓长时间高强度使用电子产品，而给眼眼带来的危害，现在需要开发一款软件，定时提醒并强制用户进行休息。

## 2.开发语言和平台

本软件将使用C#语言开发，并应用WinForm窗体实现。

## 3.主要功能清单

### 3.1 基础功能
-  本软件采用番茄钟的方式工作，在后台自动计时，当使用时间达到预先设置的时间长度后，则强制进入休息状态，软件会显示全屏并置顶。在全屏界面中显示预定义的提示语。
   - 默认工作时间为25分钟
   - 工作时间可设置范围：10-60分钟
   - 支持多显示器环境，所有显示器同时进入休息状态

### 3.2 休息功能
-  休息状态下的屏幕提示语显示风格以护眼为主要目的，配色让人感觉舒适。
   - 使用护眼绿(#C7EDCC)作为背景色
   - 显示内容包括：剩余休息时间、护眼小贴士
   - 字体采用大号无衬线字体，确保清晰易读
-  休息状态下禁用所有的鼠标以及键盘输入，避免用户退出休息状态。
- 休息时间为预先设置，用户可以自行定义。
   - 默认休息时间为5分钟
   - 休息时间可设置范围：3-15分钟
   - 休息时间结束后自动恢复工作状态

### 3.3 托盘功能
- 非休息时间即以托盘的形式进驻后台。
- 提供托盘右键菜单，选项包括"马上休息"、"设置"，"退出"等。
- 托盘图标显示当前剩余工作时间
- 在进入休息前2分钟，托盘图标闪烁提醒

### 3.4 设置功能
- 提供设置界面，可以设置工作时间以及休息时间，可以设置是否启用管理密码。
- 管理密码是指打开软件时所需要的密码认证。当启用管理密码时，软件在用户尝试打开软件时，先弹出密码验证框，验证密码输入正确后才能进入软件设置界面。
   - 密码最小长度为6位
   - 密码支持字母和数字组合
   - 提供密码重置功能（通过删除配置文件实现）
- 当进入设置界面时，计时暂停。

### 3.5 数据存储
- 相关配置保存于软件运行目录下专用的配置数据库，数据库采用SQLite3。
- 数据库采用密码连接。
   - 使用固定的内置密码
   - 存储内容包括：工作时间设置、休息时间设置、管理密码（加密存储）
- 数据库损坏时自动重建

### 3.6 快捷键支持
- Alt + B：立即休息
- Alt + S：打开设置
- Alt + Q：退出程序

## 4. 非功能性要求

### 4.1 兼容性
- 仅支持Windows 10及以上版本
- 支持多显示器环境

### 4.2 性能要求
- 内存占用不超过50MB
- CPU使用率在空闲时不超过1%

### 4.3 异常处理
- 系统休眠/待机恢复后，重新开始计时
- 程序异常退出后重启时，重置计时器
- 保留最近7天的运行日志，记录异常情况

## 5. 开发注意事项

### 5.1 代码规范
- 使用PascalCase命名类和方法
- 使用camelCase命名变量
- 所有公开方法必须包含XML注释
- 关键算法和复杂逻辑需要添加行内注释

### 5.2 项目结构
- 使用分层架构：UI层、业务逻辑层、数据访问层
- 配置信息统一管理
- 使用依赖注入管理对象生命周期

### 5.3 测试要求
- 核心功能需要编写单元测试
- 发布前进行完整的功能测试
- 确保在不同分辨率下正常显示